Berikut adalah **versi Markdown (.md)** dari laporan Tugas Akhir **Modul 3 – Manajemen Memori Tingkat Lanjut (xv6-public x86)**:

```markdown
# 📝 Laporan Tugas Akhir

**Mata Kuliah**: Sistem Operasi  
**Semester**: Genap / Tahun Ajaran 2024–2025  
**Nama**: `Fakhri Fahmi Ramadan`  
**NIM**: `240202897`  
**Modul yang Dikerjakan**:  
**Modul 3 – Manajemen Memori Tingkat Lanjut (xv6-public x86)**

---

## 📌 Deskripsi Singkat Tugas

Pada modul ini, saya mengembangkan dua fitur penting dalam sistem manajemen memori xv6:

1. **Copy-on-Write (CoW) Fork**  
   Teknik ini menghindari penyalinan memori secara langsung saat proses melakukan `fork()`. Memori anak dan induk berbagi halaman secara read-only, dan salinan hanya dilakukan jika salah satu proses menulis ke halaman tersebut.

2. **Shared Memory ala System V**  
   Menambahkan dua system call `shmget()` dan `shmrelease()` untuk memungkinkan proses saling berbagi memori menggunakan *key* tertentu. Halaman disimpan secara global dan dibagi berdasarkan *reference count*.

---

## 🛠️ Rincian Implementasi

### 1. Copy-on-Write Fork

- Menambahkan array `ref_count[]` di `vm.c` untuk menyimpan reference count tiap halaman fisik.
- Menambahkan fungsi `incref()` dan `decref()` untuk manajemen ref_count.
- Menambahkan flag `PTE_COW` di `mmu.h`.
- Membuat fungsi `cowuvm()` di `vm.c` yang menggantikan `copyuvm()` pada proses fork.
- Menyesuaikan `fork()` di `proc.c` agar menggunakan `cowuvm()`.
- Menangani **page fault** di `trap.c`, dengan menyalin halaman jika flag `PTE_COW` aktif dan terjadi akses tulis.

### 2. Shared Memory ala System V

- Menambahkan struktur array `shmtab[]` di `vm.c` untuk menyimpan *shared page*, key, dan refcount.
- Menambahkan dua system call di `sysproc.c`:
  - `shmget(int key)` → mengalokasikan atau mengambil shared memory.
  - `shmrelease(int key)` → mengurangi refcount dan membebaskan memori jika tidak digunakan.
- Mendaftarkan syscall baru di file `syscall.h`, `user.h`, `usys.S`, dan `syscall.c`.

---

## ✅ Uji Fungsionalitas

### Program Uji:

- `cowtest.c` → menguji perilaku Copy-on-Write saat proses anak dan induk mengakses halaman memori yang sama.
- `shmtest.c` → menguji shared memory antar proses dengan key yang sama.

---

## 📷 Hasil Uji

### 📍 Hasil Output `cowtest`:

```

Child sees: Y
Parent sees: X

```

➡️ Menunjukkan bahwa anak menulis salinannya sendiri, tanpa mengubah data induk.

### 📍 Hasil Output `shmtest`:

```

Child reads: A
Parent reads: B

```

➡️ Memastikan bahwa perubahan di memori bersama dapat dilihat oleh proses lain.

> 📸 Jika ada screenshot:
>
> `![hasil cowtest](./screenshot/cowtest.png)`
>
> `![hasil shmtest](./screenshot/shmtest.png)`

---

## ⚠️ Kendala yang Dihadapi

- Implementasi awal page fault pada flag `PTE_COW` salah menangani bit permission, menyebabkan kernel panic.
- Proses alokasi memori bersama menggunakan `USERTOP` menyebabkan bentrok jika dialokasikan lebih dari batas maksimum (melebihi 16 halaman).
- Lupa menambahkan `incref()` setelah `kalloc()` menyebabkan refcount nol dan halaman langsung dibebaskan oleh proses lain.

---

## 📚 Referensi

- Buku xv6: [MIT Operating System Engineering](https://pdos.csail.mit.edu/6.828/2018/xv6/book-rev11.pdf)
- xv6-public GitHub: [https://github.com/mit-pdos/xv6-public](https://github.com/mit-pdos/xv6-public)
- Diskusi praktikum dan Stack Overflow terkait page fault dan manajemen memori xv6

---
```

> 🔧 **Catatan**: Simpan file ini sebagai `modul3_laporan.md` dan ganti `<Nama Lengkap>` serta `<Nomor Induk Mahasiswa>` sesuai identitasmu. Jika ingin dikonversi ke PDF, kamu bisa buka file `.md` ini di VSCode atau Markdown editor seperti Typora dan pilih **Export as PDF**.

Butuh bantuan untuk membuat file ini langsung dalam format `.md` atau ingin saya buatkan juga versi `.docx` atau `.pdf`?
